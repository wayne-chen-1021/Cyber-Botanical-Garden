# Cyberbotanic - Spring Boot API poooooo

這是賽博植物園（Cyberbotanic）後端專案，使用 Spring Boot 開發，提供 RESTful API 支援前端 Flutter App 進行植物養成、狀態顯示與資料儲存等功能。

---

## 📦 專案結構

```
src/main/java/com/cyberbotanic/
├── controller/      # REST API 控制器 (AppController)
├── model/           # JPA Entity 類別 (User, Plant)
├── repository/      # 資料存取層 (UserRepository, PlantRepository)
└── service/         # 可擴充的業務邏輯層
```

---

## 🌱 API 規格

### 📌 使用者註冊

```
POST /api/app/users/register
```

* 請求：`{ "name": "使用者名稱" }`
* 回應：成功建立使用者 ID / 錯誤訊息

### 📌 使用者登入

```
POST /api/app/users/login
```

* 請求：`{ "name": "使用者名稱" }`
* 回應：`userId` / 找不到使用者錯誤

### 📌 種植物

```
POST /api/app/plants/action
```

* 請求：

```json
{
  "userId": 1,
  "type": "bud",
  "nickname": "小仙人掌",     // 可選
  "pot": "default"           // 可選，預設為 "default"
}
```

* 回應："植物已成功種下！"

### 📌 顯示植物 ASCII 圖（含盆栽）

```
GET /api/app/plant-image/{plantId}
```

* 回傳：對應植物種類與成長階段的 ASCII 圖

---

## 🧪 測試方式（開發階段）

使用 [httpie](https://httpie.io/) 測試 API 範例如下：

### 建立 使用者：

```bash
http POST http://localhost:8080/api/app/register userName="測試用戶"
回傳格式：
{
    "message": "註冊成功",
    "userId": 1
}

### 登入取得 用戶ID：

```bash
http POST http://localhost:8080/api/app/login userName="測試用戶" latitude:=23.6813 longitude:=120.5528
```
{
    "message": "登入成功",
    "userId": 1
}

### 種植物：

```bash
http POST http://localhost:8080/api/app/1/plant plantType="weed"
```
目前只能種植 "weed" 類型的植物。
若成功回傳：種植成功 否則回傳：未知植物類型

### 澆水：
```bash
http POST http://localhost:8080/api/app/1/1/water
```
回傳結果：
{
    "grownthStage": 0,
    "message": "澆水成功",
    "plantId": 1
}

### 施肥：
```bash
http POST http://localhost:8080/api/app/1/1/fertilize
```
回傳結果：
{
    "grownthStage": 0,
    "message": "施肥成功",
    "plantId": 1
}


### 顯示使用者所有的植物清單：

```bash
http GET http://localhost:8080/api/app/1/plants
```
回傳結果：
[
    {
        "growthStage": 0,
        "healthStatus": 100,
        "id": 1,
        "name": "NULL",
        "nutrientLevel": 0,
        "pot": "Original",
        "type": "Weed",
        "waterLevel": 0
    }
]

---

## 🚀 部署狀態

* Azure Container App：部署成功 ✅
* MySQL：使用 Azure Flexible MySQL 資料庫 ✅
* Docker：可透過 Dockerfile 打包並部署

---

## 🧾 注意事項

* 測試人員帳號（"測試用戶"）預設由 Flutter 端控制，不由後端處理。
* 可藉由 POST /api/app/users/login` 登入取得 ID，並使用該 ID 進行後續API請求。
* 種植物時，`type` 參數只可選擇 "weed"。

---

## 🧑‍💻 開發者

* 後端開發：Spring Boot
* 前端開發：Flutter
* 應用程式URL：https://cyberbotanic.politehill-c76aad8c.japaneast.azurecontainerapps.io